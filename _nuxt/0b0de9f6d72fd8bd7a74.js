(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{151:function(e,t,n){var content=n(154);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(36).default)("8a286532",content,!0,{sourceMap:!1})},152:function(e,t,n){var content=n(156);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(36).default)("2e107364",content,!0,{sourceMap:!1})},153:function(e,t,n){"use strict";var o=n(151);n.n(o).a},154:function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".slider-wrapper[data-v-4b1a3262]{background:#efefef;float:left;display:flex;flex-direction:column;justify-content:space-evenly;border-radius:2px;flex:auto;transition:background .2s}.slider-wrapper[data-v-4b1a3262]:hover{background:#f4f4f4}.slider-wrapper.sm[data-v-4b1a3262]{background:none}.slider-wrapper .slider-row[data-v-4b1a3262]{display:flex;align-items:center;justify-content:space-between;padding-right:12px;padding-left:12px}.slider-wrapper .slider-row .value[data-v-4b1a3262]{text-align:right}.slider-wrapper label[data-v-4b1a3262]{font-size:12px;letter-spacing:1}",""])},155:function(e,t,n){"use strict";var o=n(152);n.n(o).a},156:function(e,t,n){(e.exports=n(35)(!1)).push([e.i,".sound-settings{position:absolute;top:12px;right:12px}",""])},157:function(e,t,n){"use strict";n.r(t);n(55);var o={name:"Cell",props:["class_name","id"],data:function(){return{active:!1}},mounted:function(){},methods:{affectCell:function(e){var t=e.target||e.scrElement;t.classList.contains("assigned")?(t.classList.remove("assigned"),t.removeAttribute("active")):(t.classList.add("assigned"),t.setAttribute("active",!0))}}},r=n(14),c=Object(r.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"seq-button",class:this.class_name,attrs:{id:this.id},on:{click:this.affectCell}})}),[],!1,null,"e44da52a",null).exports,l={name:"Slider",props:["slider_name","min","max","value","step","class_name"],data:function(){return{sliderValue:"-",outputValue:"-"}},mounted:function(){},methods:{changeValue:function(e){var t=e.target||e.srcElement;this.sliderValue=t.value,"Kick"==t.name||"Snare"==t.name||"Filter"==t.name?this.$parent.tweakSounds(t):this.$parent.changeParam(t),this.makeValue()},makeValue:function(){this.outputValue=this.sliderValue}}},d=(n(153),Object(r.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"slider-wrapper",class:e.class_name},[n("div",{staticClass:"slider-row"},[n("label",[e._v(e._s(e.slider_name))]),n("label",{staticClass:"value synth-output"},[e._v(e._s(e.sliderValue))])]),n("div",{staticClass:"slider-row"},[n("input",{ref:"slider_name",staticClass:"slider",attrs:{name:""+e.slider_name,type:"range",min:e.min,max:e.max,step:e.step},domProps:{value:e.sliderValue},on:{input:e.changeValue}})])])}),[],!1,null,"4b1a3262",null).exports),h=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t,this.y=n},m=function(e){return this.source=[],this.sourceGain=[],this.event=e,this};m.prototype.isMoving=function(e){this.vector.x=e.pageX,this.vector.y=e.pageY,this.source[0].frequency.value=this.vector.x/10,this.source[1].frequency.value=this.vector.x/10-4},m.prototype.hasStopped=function(){this.sourceGain[0].gain.setTargetAtTime(0,audioContext.currentTime,1.15),this.sourceGain[1].gain.setTargetAtTime(0,audioContext.currentTime,1.15),activeAudioSource=!1};var v={name:"Ryfm",components:{Cell:c,Slider:d},data:function(){return{visibleSettings:!1,isTouch:null,request:null,bufferValue:4096,isPlaying:!1,currentTime:0,previousTime:0,inc:0,incMax:15,interval:60,sequences:[],drums:[{name:"hihat"},{name:"snare"},{name:"kick"}],sequenceCells:[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],kickValue:{one:.25,two:50},fundamental:40,interactiveReg:null,activeAudioSource:!1,snd:[]}},mounted:function(){this.isTouch=/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB|PlayBook|IEMobile|Windows Phone|Kindle|Silk|Opera Mini/i.test(navigator.userAgent),window.AudioContext=window.AudioContext||window.webkitAudioContext,this.playIcon=this.$refs.play_icon,this.footer=this.$refs.footer,this.setupAudioContext()},created:function(){this.setupButtons("sixteen-buttons",16)},methods:{toggleControls:function(){this.footer.classList.toggle("expanded")},hide:function(){this.visibleSettings=!1},spinNewAudioSource:function(e){var t;this.activeAudioSource||(t=new m(e),this.initTouchSynth(t)),this.activeAudioSource=!0},youAreMoving:function(e){this.activeAudioSource&&(this.snd.source[0].frequency.value=e.pageX/10,this.snd.source[1].frequency.value=e.pageX/10-4)},youShouldStop:function(e){this.snd.sourceGain[0].gain.setTargetAtTime(0,this.audioContext.currentTime,1.15),this.snd.sourceGain[1].gain.setTargetAtTime(0,this.audioContext.currentTime,1.15),this.activeAudioSource=!1},initTouchSynth:function(e){this.snd=e,this.snd.source[0]=this.audioContext.createOscillator(),this.snd.source[1]=this.audioContext.createOscillator(),this.snd.sourceGain[0]=this.audioContext.createGain(),this.snd.sourceGain[1]=this.audioContext.createGain(),this.snd.source[0].type="sine",this.snd.source[1].type="square",this.snd.source[0].connect(this.snd.sourceGain[0]),this.snd.source[1].connect(this.snd.sourceGain[1]),this.snd.sourceGain[0].connect(this.trackFilter),this.snd.sourceGain[1].connect(this.trackFilter),this.snd.sourceGain[0].gain.value=1,this.snd.sourceGain[1].gain.value=.5,this.snd.source[0].start(0),this.snd.source[1].start(0),this.snd.vector=new h(this.snd.event.pageX,this.snd.event.pageY),this.snd.source[0].frequency.value=this.snd.vector.x/5,this.snd.source[1].frequency.value=this.snd.vector.x/5-4,console.log(this.snd)},performAnimation:function(){this.request=requestAnimationFrame(this.performAnimation)},setupAudioContext:function(){this.audioContext=new AudioContext,this.mixGain=this.audioContext.createGain(),this.filterGain=this.audioContext.createGain(),this.mixButton=document.querySelector("#mixButton"),this.trackFilter=this.audioContext.createBiquadFilter(),this.convolver=this.audioContext.createConvolver(),this.dry=this.audioContext.createGain(),this.wet=this.audioContext.createGain(),this.delay=this.audioContext.createDelay(),this.feedbackGain=this.audioContext.createGain(),this.mixGain.connect(this.audioContext.destination),this.mixGain.connect(this.delay),this.delay.connect(this.feedbackGain),this.feedbackGain.connect(this.delay),this.delay.connect(this.convolver),this.delay.connect(this.dry),this.convolver.connect(this.wet),this.dry.connect(this.trackFilter),this.wet.connect(this.trackFilter),this.trackFilter.connect(this.audioContext.destination),this.wet.gain.value=0,this.mixGain.gain.value=0,this.filterGain.gain.value=0,this.trackFilter.type="highpass",this.trackFilter.frequency.value=4e3,this.feedbackGain.gain.value=0,this.listenForKeys(),this.loadImpulse()},loadImpulse:function(){var e=this,t=function(t){var n=new XMLHttpRequest;n.open("GET","./snd/HaleHolisticYogaStudio.wav",!0),n.responseType="arraybuffer",n.onload=function(){e.audioContext.decodeAudioData(n.response,(function(t){e.convolver.buffer=t}),(function(e){console.log(e)}))},n.onerror=function(e){},n.send()};t()},togglePlay:function(e){e.target||e.scrElement;this.playIcon.classList.contains("play")?(this.playIcon.classList.remove("play"),this.playIcon.classList.add("stop"),this.isPlaying=!1,this.currentTime=0,this.previousTime=0):(this.playIcon.classList.remove("stop"),this.playIcon.classList.add("play"),this.isPlaying=!0,this.playSequence())},playSequence:function(){var e=document.getElementsByClassName("cell-row");document.getElementsByClassName("sixteen-buttons");if(this.isPlaying&&requestAnimationFrame(this.playSequence),this.currentTime-this.previousTime>this.interval){this.previousTime=this.currentTime,e[0].children[this.inc].getAttribute("active")&&this.playSound("72"),e[1].children[this.inc].getAttribute("active")&&this.playSound("83"),e[2].children[this.inc].getAttribute("active")&&this.playSound("65"),this.inc++,this.inc>this.incMax&&(this.inc=0);for(var i=0;i<e[0].children.length;i++)i==this.inc-1?e[0].children[i].classList.add("playing-now"):e[0].children[i].classList.remove("playing-now")}this.currentTime++},setupButtons:function(e,t){this.steps=t;for(var n=1;n<=3;n++)for(var o=1;o<=this.steps;o++){(new Object).name=o+", "+n;0}},playSound:function(e){var t=this;if("65"==e){this.oscs=new Array(2),this.gains=new Array(2);for(var i=0;i<this.oscs.length;i++)this.oscs[i]=t.audioContext.createOscillator(),this.oscs[i].type=0==i?"triangle":"sine",this.gains[i]=t.audioContext.createGain(),this.gains[i].gain.setValueAtTime(1,t.audioContext.currentTime),this.gains[i].gain.exponentialRampToValueAtTime(.001,t.audioContext.currentTime+t.kickValue.one),this.oscs[i].frequency.setValueAtTime(0==i?120:t.kickValue.two,t.audioContext.currentTime),this.oscs[i].frequency.exponentialRampToValueAtTime(.001,t.audioContext.currentTime+t.kickValue.one),this.oscs[i].connect(this.gains[i]),this.gains[i].connect(t.mixGain),this.gains[i].connect(t.audioContext.destination),this.oscs[i].start(t.audioContext.currentTime),this.oscs[i].stop(t.audioContext.currentTime+.5);t.mixGain.gain.value=1}else if("83"==e){var n=t.audioContext.createOscillator(),o=t.audioContext.createGain();t.filterGain.gain.setValueAtTime(1,t.audioContext.currentTime),t.filterGain.gain.exponentialRampToValueAtTime(.01,t.audioContext.currentTime+.2),n.type="triangle",n.frequency.value=100,o.gain.value=0,o.gain.setValueAtTime(0,t.audioContext.currentTime),o.gain.exponentialRampToValueAtTime(.01,t.audioContext.currentTime+.1),n.connect(o),o.connect(t.mixGain),t.mixGain.gain.value=1,n.start(t.audioContext.currentTime),n.stop(t.audioContext.currentTime+.2);var r=t.audioContext.createBufferSource(),c=t.audioContext.createBuffer(1,4096,t.audioContext.sampleRate),data=c.getChannelData(0),filter=t.audioContext.createBiquadFilter();filter.type="highpass",filter.frequency.setValueAtTime(100,t.audioContext.currentTime),filter.frequency.linearRampToValueAtTime(1e3,t.audioContext.currentTime+.2);for(i=0;i<t.bufferValue;i++)data[i]=Math.random();r.buffer=c,r.loop=!0,r.connect(filter),filter.connect(t.filterGain),t.filterGain.connect(t.mixGain),r.start(t.audioContext.currentTime),r.stop(t.audioContext.currentTime+.2)}else if("72"==e){var l=t.audioContext.createGain(),d=t.audioContext.createBiquadFilter();d.type="bandpass",d.frequency.value=1e4;var h=t.audioContext.createBiquadFilter();h.type="highpass",h.frequency.value=7e3,[2,3,4.16,5.43,6.79,8.21].forEach((function(e){var n=t.audioContext.createOscillator();n.type="square",n.frequency.value=t.fundamental*e,n.connect(d),n.start(t.audioContext.currentTime),n.stop(t.audioContext.currentTime+.05)})),l.gain.setValueAtTime(1,t.audioContext.currentTime),l.gain.exponentialRampToValueAtTime(.01,t.audioContext.currentTime+.05),d.connect(h),h.connect(l),l.connect(t.mixGain),t.mixGain.gain.value=1}},listenForKeys:function(){var e=this;document.addEventListener("keydown",(function(t){e.playSound(t.which)}))},tweakSounds:function(e){console.log(e.name+": "+e.value),"hihat"==e.name?fundamental=e.value:"Snare"==e.name?this.bufferValue=e.value:"Kick"==e.name?this.kickValue.two=parseInt(e.value):"Filter"==e.name&&(this.trackFilter.frequency.value=e.value)},triggerSound:function(e){var t=(e.target||e.srcElement).getAttribute("name");"hihat"==t?this.playSound("72"):"snare"==t?this.playSound("83"):"kick"==t&&this.playSound("65")},changeParam:function(e){if("Tempo"==e.name&&this.changeSpeed(e.value,e.max),"Reverb"==e.name){var t=e.value/100;this.dry.gain.value=1-t,this.wet.gain.value=t}"Delay"!=e.name&&"Delay2"!=e.name||this.changeDelay(e)},changeDelay:function(e){"Delay"==e.name?this.delay.delayTime.value=e.value:"Delay2"==e.name&&(this.feedbackGain.gain.value=e.value)},changeSpeed:function(e,t){var n=Math.floor(this.convertRange(t-e,[0,1e3],[2,50])),o=Math.floor(60/(4*n)*60);this.interval=n,console.log(o+", "+n),console.log(o+", "+this.value)},convertRange:function(e,t,n){return(e-t[0])*(n[1]-n[0])/(t[1]-t[0])+n[0]}}},f=(n(155),Object(r.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-container"},[n("div",{staticClass:"middle-container"},[n("div",{staticClass:"sidebar"},[n("div",{staticClass:"sidebar-container syn"}),n("div",{staticClass:"sidebar-container seq"},[n("div",{staticClass:"seq-button button icon hihat",attrs:{name:"hihat"},on:{click:e.triggerSound}}),n("div",{staticClass:"seq-button button icon snare",attrs:{name:"snare"},on:{click:e.triggerSound}}),n("div",{staticClass:"seq-button button icon kick",attrs:{name:"kick"},on:{click:e.triggerSound}})])]),n("div",{staticClass:"synth-wrapper"},[n("div",{staticClass:"synth-container",on:{mousedown:e.spinNewAudioSource,touchstart:e.spinNewAudioSource,mousemove:e.youAreMoving,touchmove:e.youAreMoving,mouseup:e.youShouldStop,touchend:e.youShouldStop}}),n("div",{staticClass:"sequencer"},e._l(e.drums,(function(t,o){return n("div",{staticClass:"cell-row"},e._l(e.sequenceCells[o],(function(e,t){return n("Cell",{key:t,attrs:{class_name:"sixteen-buttons",id:t}})})),1)})),0)])]),n("div",{ref:"footer",staticClass:"footer"},[n("div",{staticClass:"trigger-footer button icon settings",on:{click:e.toggleControls}}),n("div",{staticClass:"control-row one"},[n("Slider",{attrs:{slider_name:"Kick",min:30,max:500,value:50,step:1}}),n("Slider",{attrs:{slider_name:"Snare",min:100,max:4096,value:4096,step:1}}),n("Slider",{attrs:{slider_name:"Hihat",min:20,max:200,value:40,step:1}}),n("Slider",{attrs:{slider_name:"Filter",min:20,max:5e3,value:2500,step:1}})],1),n("div",{staticClass:"control-row two"},[n("div",{staticClass:"control-section play-toggle",on:{click:e.togglePlay}},[n("div",{staticClass:"play-button"},[n("div",{ref:"play_icon",staticClass:"play-icon stop"})])]),n("Slider",{attrs:{slider_name:"Tempo",min:0,max:1e3,value:60,step:1}}),n("Slider",{attrs:{slider_name:"Reverb",min:0,max:100,value:0,step:1}}),n("div",{staticClass:"control-section delay"},[n("Slider",{attrs:{slider_name:"Delay",min:0,max:4.9,value:0,step:.001}}),n("Slider",{attrs:{slider_name:"Delay2",min:0,max:.9,value:0,step:.01}})],1)],1)])])}),[],!1,null,null,null));t.default=f.exports}}]);